<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html  xmlns="http://www.w3.org/1999/xhtml"
       xmlns:tp = "http://java.sun.com/jsf/composite/test"
       xmlns:h="http://java.sun.com/jsf/html"
       xmlns:p="http://primefaces.org/ui"
       xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
    <title>Работа с Базой Данных</title>
</h:head>

<h:body>
    <h2>#{bean.msg}</h2>
    <h:form id="form">
        <p:commandButton value="Упорядочить по дате рождения" id="sort" action="#{bean.sort()}" ajax="true"
                         update="table:tableForm:table" icon="fa fa-sort-amount-desc" />
        <p:commandButton value="Добавить информацию о новом человеке" id="insertBtn" ajax="true"
                         action="#{bean.prepareForInsert}" onclick="PF('insertDlg').show();"
                         update="insert:formUps:upsPanel" icon="fa fa-plus"/>
        <p:commandButton value="Обновить данные" id="updateTable" ajax="true"
                         update="table:tableForm:table" icon="fa fa-refresh"/>
    </h:form>

    <br/>

    <tp:table id="table" update="update:formUps:upsPanel" onclick="PF('updateDlg').show();"/>

    <tp:upsertPerson id="insert" person="#{bean.modelForInsert}"
                     dataAndGender="#{bean.helpForInsert}" widgetVar="insertDlg" header="Внесение данных" />

    <tp:upsertPerson id="update" person="#{bean.modelForUpdate}"
                     dataAndGender="#{bean.helpForUpdate}"  widgetVar="updateDlg" header="Изменение данных" />
</h:body>
</html>